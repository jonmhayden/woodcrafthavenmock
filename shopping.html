<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Page with Cart</title>
</head>
<body>

    <!-- <input type="file" id="csvFileInput" accept=".csv"> -->
    <div id="cart">
      <h3>Shopping Cart</h3>
      <ul id="cartList"></ul>
      <p>Total: $<span id="totalAmount">0.00</span></p>
    </div>
    <div id="productList"></div>


    <script>
        let cart = [];
        let totalAmount = 0;

        //document.getElementById('csvFileInput').addEventListener('change', handleFileSelect);
        //function handleFileSelect(event) {
            const file = "products.csv";
            //const file = event.target.files[0];

            if (file) {
                const reader = new FileReader();

                reader.onload = function (e) {
                    const contents = e.target.result;
                    displayProductList(contents);
                };

                reader.readAsText(file);
            }
       // }

        //function displayProductList(contents) {
            const lines = contents.split('\n');
            const productListDiv = document.getElementById('productList');
            productListDiv.innerHTML = '<h3>Product List:</h3>';

            for (let i = 0; i < lines.length; i++) {
                const line = lines[i].trim();
                if (line) {
                    const columns = line.split(',');
                    const itemName = columns[0];
                    const price = parseFloat(columns[2]).toFixed(2);

                    const rowDiv = document.createElement('div');
                    rowDiv.innerHTML = `
                        <p>${itemName} - $${price}</p>
                        <button onclick="addToCart('${itemName}', ${price})">Add to Cart</button>
                        <button onclick="removeFromCart('${itemName}', ${price})">Remove from Cart</button>
                    `;

                    productListDiv.appendChild(rowDiv);
                }
            }
        //}

        function addToCart(itemName, price) {
            cart.push({ itemName, price });
            updateCart();
        }

        function removeFromCart(itemName, price) {
            const index = cart.findIndex(item => item.itemName === itemName && item.price === price);
            if (index !== -1) {
                cart.splice(index, 1);
                updateCart();
            }
        }

        function updateCart() {
            const cartList = document.getElementById('cartList');
            const totalAmountSpan = document.getElementById('totalAmount');

            // Clear and update the cart list
            cartList.innerHTML = '';
            totalAmount = 0;

            cart.forEach(item => {
                totalAmount += parseFloat(item.price);
                const listItem = document.createElement('li');
                listItem.textContent = `${item.itemName} - $${item.price}`;
                cartList.appendChild(listItem);
            });

            // Update the total amount
            totalAmountSpan.textContent = totalAmount.toFixed(2);
        }
    </script>

</body>
</html>
